{"ast":null,"code":"import React,{useState}from'react';import{GoogleLogin}from'@react-oauth/google';import{jwtDecode}from\"jwt-decode\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmailAuth(_ref){let{onAuthComplete}=_ref;const[error,setError]=useState('');const handleGoogleSuccess=async credentialResponse=>{try{const decodedToken=jwtDecode(credentialResponse.credential);const email=decodedToken.email;// Verify it's a Gmail account\nif(!email.endsWith('@gmail.com')){setError('Please use a Gmail account for authentication.');return;}// Store the email and credentials\nlocalStorage.setItem('senderEmail',email);localStorage.setItem('googleCredential',credentialResponse.credential);onAuthComplete({email});}catch(err){console.error('Google auth error:',err);setError('Failed to authenticate with Google. Please try again.');}};const handleGoogleError=()=>{setError('Google Sign-In failed. Please try again.');};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign in with Google\"}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-description\",children:\"To enable email notifications, please sign in with your Gmail account. This will allow us to send reminder emails on your behalf.\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"google-auth-container\",children:/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleSuccess,onError:handleGoogleError,shape:\"pill\",theme:\"filled_blue\",text:\"signin_with\",useOneTap:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-info\",children:/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"We only use your Gmail account to send reminder notifications. Your credentials are securely stored and can be revoked at any time.\"})})]})});}","map":{"version":3,"names":["React","useState","GoogleLogin","jwtDecode","jsx","_jsx","jsxs","_jsxs","EmailAuth","_ref","onAuthComplete","error","setError","handleGoogleSuccess","credentialResponse","decodedToken","credential","email","endsWith","localStorage","setItem","err","console","handleGoogleError","className","children","onSuccess","onError","shape","theme","text","useOneTap"],"sources":["F:/Remainder_ai/frontend/src/components/EmailAuth.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport { jwtDecode } from \"jwt-decode\"; \r\n\r\n\r\nexport default function EmailAuth({ onAuthComplete }) {\r\n  const [error, setError] = useState('');\r\n\r\n  const handleGoogleSuccess = async (credentialResponse) => {\r\n    try {\r\n      const decodedToken = jwtDecode(credentialResponse.credential);\r\n      const email = decodedToken.email;\r\n      \r\n      // Verify it's a Gmail account\r\n      if (!email.endsWith('@gmail.com')) {\r\n        setError('Please use a Gmail account for authentication.');\r\n        return;\r\n      }\r\n\r\n      // Store the email and credentials\r\n      localStorage.setItem('senderEmail', email);\r\n      localStorage.setItem('googleCredential', credentialResponse.credential);\r\n      \r\n      onAuthComplete({ email });\r\n    } catch (err) {\r\n      console.error('Google auth error:', err);\r\n      setError('Failed to authenticate with Google. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleGoogleError = () => {\r\n    setError('Google Sign-In failed. Please try again.');\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      <div className=\"auth-card\">\r\n        <h2>Sign in with Google</h2>\r\n        <p className=\"auth-description\">\r\n          To enable email notifications, please sign in with your Gmail account.\r\n          This will allow us to send reminder emails on your behalf.\r\n        </p>\r\n        {error && <div className=\"error-message\">{error}</div>}\r\n        \r\n        <div className=\"google-auth-container\">\r\n          <GoogleLogin\r\n            onSuccess={handleGoogleSuccess}\r\n            onError={handleGoogleError}\r\n            shape=\"pill\"\r\n            theme=\"filled_blue\"\r\n            text=\"signin_with\"\r\n            useOneTap={true}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"auth-info\">\r\n          <p className=\"help-text\">\r\n            We only use your Gmail account to send reminder notifications.\r\n            Your credentials are securely stored and can be revoked at any time.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,qBAAqB,CACjD,OAASC,SAAS,KAAQ,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGvC,cAAe,SAAS,CAAAC,SAASA,CAAAC,IAAA,CAAqB,IAApB,CAAEC,cAAe,CAAC,CAAAD,IAAA,CAClD,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAY,mBAAmB,CAAG,KAAO,CAAAC,kBAAkB,EAAK,CACxD,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGZ,SAAS,CAACW,kBAAkB,CAACE,UAAU,CAAC,CAC7D,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACE,KAAK,CAEhC;AACA,GAAI,CAACA,KAAK,CAACC,QAAQ,CAAC,YAAY,CAAC,CAAE,CACjCN,QAAQ,CAAC,gDAAgD,CAAC,CAC1D,OACF,CAEA;AACAO,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEH,KAAK,CAAC,CAC1CE,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAEN,kBAAkB,CAACE,UAAU,CAAC,CAEvEN,cAAc,CAAC,CAAEO,KAAM,CAAC,CAAC,CAC3B,CAAE,MAAOI,GAAG,CAAE,CACZC,OAAO,CAACX,KAAK,CAAC,oBAAoB,CAAEU,GAAG,CAAC,CACxCT,QAAQ,CAAC,uDAAuD,CAAC,CACnE,CACF,CAAC,CAED,KAAM,CAAAW,iBAAiB,CAAGA,CAAA,GAAM,CAC9BX,QAAQ,CAAC,0CAA0C,CAAC,CACtD,CAAC,CAED,mBACEP,IAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BlB,KAAA,QAAKiB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpB,IAAA,OAAAoB,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BpB,IAAA,MAAGmB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,mIAGhC,CAAG,CAAC,CACHd,KAAK,eAAIN,IAAA,QAAKmB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEd,KAAK,CAAM,CAAC,cAEtDN,IAAA,QAAKmB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCpB,IAAA,CAACH,WAAW,EACVwB,SAAS,CAAEb,mBAAoB,CAC/Bc,OAAO,CAAEJ,iBAAkB,CAC3BK,KAAK,CAAC,MAAM,CACZC,KAAK,CAAC,aAAa,CACnBC,IAAI,CAAC,aAAa,CAClBC,SAAS,CAAE,IAAK,CACjB,CAAC,CACC,CAAC,cAEN1B,IAAA,QAAKmB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBpB,IAAA,MAAGmB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,qIAGzB,CAAG,CAAC,CACD,CAAC,EACH,CAAC,CACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}